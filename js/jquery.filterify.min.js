(function(c){c.fn.filterify=function(h){return this.each(function(){var g=[],e=[],f=[],d=[],k=[],b=/between-[0-9]+-[1-9]+/g;if(c(this).is("table")){var p=c(this);void 0!=h?(void 0==h.columns&&(h.columns="all"),void 0==h.emptyValue&&(h.emptyValue="Show everything")):h={columns:"all",emptyValue:"Show everything"};switch(!0){case "all"==h.columns:b=c(this).find("tr").first();0<b.find("td").length?b.find("td").each(function(a){k.push(a);g.push(c(this));e.push([]);f.push([]);d.push("all")}):b.find("th").each(function(a){k.push(a);
g.push(c(this));e.push([]);f.push([]);d.push("all")});break;case "except-first"==h.columns:b=c(this).find("tr").first();0<b.find("td").length?b.find("td:gt(0)").each(function(a){k.push(a+1);g.push(c(this));e.push([]);f.push([]);d.push("all")}):b.find("th:gt(0)").each(function(a){k.push(a+1);g.push(c(this));e.push([]);f.push([]);d.push("all")});break;case "except-last"==h.columns:b=c(this).find("tr").first();0<b.find("td").length?b.find("td:lt("+(b.find("td").length-1)+")").each(function(a){k.push(a);
g.push(c(this));e.push([]);f.push([]);d.push("all")}):b.find("th:lt("+(b.find("th").length-1)+")").each(function(a){k.push(a);g.push(c(this));e.push([]);f.push([]);d.push("all")});break;case "except-first-and-last"==h.columns:b=c(this).find("tr").first();0<b.find("td").length?b.find("td:lt("+(b.find("td").length-1)+"):gt(0)").each(function(a){k.push(a+1);g.push(c(this));e.push([]);f.push([]);d.push("all")}):b.find("th:lt("+(b.find("th").length-1)+"):gt(0)").each(function(a){k.push(a+1);g.push(c(this));
e.push([]);f.push([]);d.push("all")});break;case b.test(h.columns):var b=c(this).find("tr").first(),m=h.columns.substr(8),m=m.split("-").map(Number);0<b.find("td").length?b.find("td:lt("+m[1]+"):gt("+m[0]+")").each(function(a){k.push(a+(m[0]+1));g.push(c(this));e.push([]);f.push([]);d.push("all")}):b.find("th:lt("+m[1]+"):gt("+m[0]+")").each(function(a){k.push(a+(m[0]+1));g.push(c(this));e.push([]);f.push([]);d.push("all")});break;default:var q=h.columns.split(",").map(Number),b=/[0-9,]+/g;b.test(h.columns)?
(b=c(this).find("tr").first(),0<b.find("td").length?b.find("td").each(function(a){0<=c.inArray(a+1,q)&&(k.push(a),g.push(c(this)),e.push([]),f.push([]),d.push("all"))}):b.find("th").each(function(a){0<=c.inArray(a+1,q)&&(k.push(a),g.push(c(this)),e.push([]),f.push([]),d.push("all"))})):(b=this.find("tr").first(),0<b.find("td").length?b.find("td").each(function(a){k.push(a);g.push(c(this));e.push([]);f.push([]);d.push("all")}):b.find("th").each(function(a){k.push(a);g.push(c(this));e.push([]);f.push([]);
d.push("all")}))}var r=1;c(this).find("tr:gt(0)").each(function(){var a=0,b=c(this);c(this).find("td").each(function(d){0<=c.inArray(d,k)&&(e[a].push(c(this).text()),void 0==f[a][c(this).text()]&&(f[a][c(this).text()]="filterify-"+r,r++),b.addClass(f[a][c(this).text()]),a++)})});for(var l=0;l<g.length;l++){g[l].append('<select class="filterify-select" rel="'+l+'"><option value="all">'+h.emptyValue+"</option></select>");e[l].sort(naturalSort);for(var n=0;n<e[l].length;n++){var s=!1;g[l].find("select").first().find("option").each(function(){if(c(this).val()==
f[l][e[l][n]])return s=!0,!1});s||g[l].find("select").first().append('<option value="'+f[l][e[l][n]]+'">'+e[l][n]+"</option>")}}c(this).find("select").each(function(){c(this).change(function(){var a=c(this).val();d[c(this).attr("rel")]=a;for(var a=!0,b=0;b<d.length;b++)if("all"!=d[b]){a=!1;break}a?p.find("tr:gt(0)").each(function(){c(this).css("display","table-row")}):p.find("tr:gt(0)").each(function(){for(var b=!0,a=0;a<d.length;a++)if("all"!=d[a]&&!c(this).hasClass(d[a])){b=!1;break}b?c(this).css("display",
"table-row"):c(this).css("display","none")})})})}})}})(jQuery);